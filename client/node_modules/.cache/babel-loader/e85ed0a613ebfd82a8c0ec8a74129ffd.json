{"ast":null,"code":"var _jsxFileName = \"/home/dima/Desktop/Projects/tic-tac-toe/client/src/components/StartPage/StartPage.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\"; // Components\n\nimport MenuChoise from \"../MenuChoise/MenuChoise\";\nimport InputForm from \"../InputForm/InputForm\"; // socket.io client\n\nconst io = require(\"socket.io-client\");\n\nconst socket = io(\"http://localhost:5000\");\nexport default function StartPage() {\n  const [isSelectedMenu, setIsSelectedMenu] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [newGame, setNewGame] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [serverLoaded, setServerLoaded] = useState(false);\n  useEffect(() => {\n    setLoading(false);\n    socket.on(\"newGameHasCreated\", room => {\n      // Set room ID\n      setRoom(room);\n      setServerLoaded(true);\n    }); // when user disconected - close session\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [serverLoaded]);\n\n  const validateInputName = () => {\n    return newGame ? name.trim() !== \"\" : name.trim() !== \"\" && room.trim() !== \"\";\n  };\n\n  const handleSelect = isNewGame => {\n    setIsSelectedMenu(true);\n    isNewGame ? setNewGame(true) : setNewGame(false);\n  };\n\n  const handleInput = e => {\n    setName(e.target.value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (validateInputName()) {\n      newGame ? socket.emit(\"createNewGame\") : socket.emit(\"joinCreatedGame\", {\n        room\n      });\n    }\n  }; // Render\n\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  } else if (serverLoaded) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: `/game?room=${room}&name=${name}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 12\n      }\n    });\n  } else if (isSelectedMenu) {\n    return /*#__PURE__*/React.createElement(InputForm, {\n      setIsSelectedMenu: setIsSelectedMenu,\n      onSubmit: handleSubmit,\n      onInput: handleInput,\n      newGame: newGame,\n      name: name,\n      room: room,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    });\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"start-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MenuChoise, {\n      onSelect: handleSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }));\n  }\n}","map":{"version":3,"sources":["/home/dima/Desktop/Projects/tic-tac-toe/client/src/components/StartPage/StartPage.js"],"names":["React","useEffect","useState","Redirect","MenuChoise","InputForm","io","require","socket","StartPage","isSelectedMenu","setIsSelectedMenu","name","setName","room","setRoom","newGame","setNewGame","loading","setLoading","serverLoaded","setServerLoaded","on","disconnect","validateInputName","trim","handleSelect","isNewGame","handleInput","e","target","value","handleSubmit","preventDefault","emit"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\n// Components\nimport MenuChoise from \"../MenuChoise/MenuChoise\";\nimport InputForm from \"../InputForm/InputForm\";\n\n// socket.io client\nconst io = require(\"socket.io-client\");\nconst socket = io(\"http://localhost:5000\");\n\nexport default function StartPage() {\n  const [isSelectedMenu, setIsSelectedMenu] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [newGame, setNewGame] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [serverLoaded, setServerLoaded] = useState(false);\n\n  useEffect(() => {\n    setLoading(false);\n\n    socket.on(\"newGameHasCreated\", (room) => {\n      // Set room ID\n      setRoom(room);\n      setServerLoaded(true);\n    });\n    // when user disconected - close session\n    return () => {\n      socket.disconnect();\n    };\n  }, [serverLoaded]);\n\n  const validateInputName = () => {\n    return newGame\n      ? name.trim() !== \"\"\n      : name.trim() !== \"\" && room.trim() !== \"\";\n  };\n\n  const handleSelect = (isNewGame) => {\n    setIsSelectedMenu(true);\n    isNewGame ? setNewGame(true) : setNewGame(false);\n  };\n\n  const handleInput = (e) => {\n    setName(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (validateInputName()) {\n      newGame\n        ? socket.emit(\"createNewGame\")\n        : socket.emit(\"joinCreatedGame\", { room });\n    }\n  };\n\n  // Render\n  if (loading) {\n    return <h1>Loading...</h1>;\n  } else if (serverLoaded) {\n    return <Redirect to={`/game?room=${room}&name=${name}`} />;\n  } else if (isSelectedMenu) {\n    return (\n      <InputForm\n        setIsSelectedMenu={setIsSelectedMenu}\n        onSubmit={handleSubmit}\n        onInput={handleInput}\n        newGame={newGame}\n        name={name}\n        room={room}\n      />\n    );\n  } else {\n    return (\n      <div className=\"start-container\">\n        <MenuChoise onSelect={handleSelect} />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}